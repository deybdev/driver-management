<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile</title>
    <!-- IMPORT CSS -->
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/profile.css" />
    <link rel="stylesheet" href="css/dashboard.css" />
    <!-- ICONIFY CDN -->
    <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
  </head>
  <body>
    <!-- NAVBAR (Reusable when using backend via PHP include) -->
    <nav id="sidebar" class="sidebar">
      <!-- LOGO -->
      <div>
        <img src="assets/logo.png" alt="" />
      </div>
      <p>MENU</p>
      <ul>
        <li onclick="this.querySelector('a').click()">
          <span
            class="iconify"
            data-icon="material-symbols:dashboard-rounded"
          ></span
          ><a href="dashboard.html"> Dashboard</a>
        </li>

        <li onclick="this.querySelector('a').click()">
          <span class="iconify" data-icon="uis:schedule"></span>
          <a href="schedule.html"> Schedule</a>
        </li>

        <li onclick="this.querySelector('a').click()">
          <span class="iconify" data-icon="ic:round-message"></span
          ><a href="message.html"> Messages</a>
        </li>
        <li onclick="this.querySelector('a').click()">
          <span class="iconify" data-icon="solar:wallet-bold"></span
          ><a href="wallet.html"> My Wallet</a>
        </li>
        <li onclick="this.querySelector('a').click()">
          <span class="iconify" data-icon="fa-solid:history"></span
          ><a href="history.html"> Compliance</a>
        </li>
        <li class="active" onclick="this.querySelector('a').click()">
          <span class="iconify" data-icon="iconamoon:profile-fill"></span
          ><a href="profile.html"> Profile</a>
        </li>
      </ul>
    </nav>
    <div class="main-content">
      <h1 class="page-title">Profile</h1>
      <div class="profile-container">
        <!-- Left Column -->
        <div class="left-column">
          <!-- Profile Card -->
          <div class="profile-card">
            <div class="profile-avatar">
              <img
                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSBcmfL2liSkvMLJ7KJE925MM7kSlBjx6sPRg&s"
                alt="Profile Picture"
              />
            </div>
            <div class="profile-info">
              <h2>Libron Jims.</h2>
              <span class="profile-role">Driver</span>
              <span class="profile-status">ACTIVE</span>
            </div>

            <hr />

            <div class="profile-contact">
              <div class="contact-item">
                <span class="iconify" data-icon="material-symbols:mail"></span>
                <span>Lebronjames@gmail.com</span>
              </div>
              <div class="contact-item">
                <span class="iconify" data-icon="material-symbols:call"></span>
                <span>+63 912 345 6789</span>
              </div>
              <div class="contact-item">
                <span
                  class="iconify"
                  data-icon="material-symbols:calendar-month"
                ></span>
                <span>Member since Jan 2024</span>
              </div>
            </div>
            <!-- Logout Button -->
            <button class="logout-btn" onclick="logout()">
              <span class="iconify" data-icon="material-symbols:logout"></span>
              Logout
            </button>
          </div>

          <!-- Quick Stats Section -->
          <div class="quick-stats">
            <h3>Quick Stats</h3>
            <div class="stats-row">
              <span class="stat-label">Total Trips</span>
              <span class="stat-value">142</span>
            </div>
            <div class="stats-row">
              <span class="stat-label">Rating</span>
              <span class="stat-value"
                >4.8
                <span
                  class="iconify star"
                  data-icon="material-symbols:star"
                ></span
              ></span>
            </div>
          </div>
        </div>
        <!-- Right Account Info Card -->
        <div class="account-card">
          <div class="account-tabs">
            <button class="tab active" data-tab="account">
              <span class="iconify" data-icon="material-symbols:person"></span>
            </button>
            <button class="tab" data-tab="permissions">
              <span class="iconify" data-icon="material-symbols:shield"></span>
            </button>
            <button class="tab" data-tab="notifications">
              <span
                class="iconify"
                data-icon="material-symbols:notifications"
              ></span>
            </button>
            <button class="tab" data-tab="settings">
              <span
                class="iconify"
                data-icon="material-symbols:settings"
              ></span>
            </button>
          </div>

          <!-- Account Information Tab -->
          <div class="tab-content active" id="account">
            <h3>Account Information</h3>
            <div class="form-group">
              <label>Username</label>
              <input type="text" value="Lebronie" readonly />
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="text" value="Lebronjames@gmail.com" readonly />
            </div>
            <div class="form-group">
              <label>Phone Number</label>
              <input type="text" value="+63 912 345 6789" readonly />
            </div>
            <button class="manage-account">Manage Account</button>
          </div>

          <!-- Role & Permissions Tab -->
          <div class="tab-content" id="permissions">
            <h3>Role & Permissions</h3>
            <div class="role-info">
              <div class="role-badge">
                <span
                  class="iconify"
                  data-icon="material-symbols:shield"
                ></span>
                <div>
                  <strong>Current Role: Driver</strong>
                  <p>
                    You have access to driver-specific features and trip
                    management.
                  </p>
                </div>
              </div>
            </div>
            <div class="permissions-section">
              <h4>Display Options (User Access)</h4>
              <div class="permission-item">
                <div class="permission-info">
                  <span>View Trip History</span>
                </div>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>

          <!-- Notification Preferences Tab -->
          <div class="tab-content" id="notifications">
            <h3>Notification Preferences</h3>
            <p class="tab-description">Manage your email and SMS alerts</p>

            <div class="notification-group">
              <div class="notification-item">
                <div class="notification-info">
                  <strong>Email Alerts</strong>
                  <p>Receive notifications via email</p>
                </div>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>

              <div class="notification-item">
                <div class="notification-info">
                  <strong>SMS Alerts</strong>
                  <p>Receive notifications via SMS</p>
                </div>
                <label class="toggle">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>

          <!-- System Settings Tab -->
          <div class="tab-content" id="settings">
            <h3>System Settings</h3>
            <p class="tab-description">
              Manage accounts, reset data, and system preferences
            </p>

            <div class="settings-group">
              <div class="form-group">
                <label>Language</label>
                <select>
                  <option value="english" selected>English</option>
                  <option value="spanish">Spanish</option>
                  <option value="french">French</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Manage Account Modal -->
    <div id="manage-account-modal" class="manage-modal">
      <div class="manage-modal-content">
        <div class="manage-modal-header">
          <h2>Manage Account</h2>
          <button class="close-manage-modal">
            <span class="iconify" data-icon="mdi:close"></span>
          </button>
        </div>

        <!-- Tab Navigation -->
        <div class="manage-tabs">
          <button class="manage-tab-btn active" data-tab="profile-info-tab">
            Profile Information
          </button>
          <button class="manage-tab-btn" data-tab="change-password-tab">
            Change Password
          </button>
        </div>

        <!-- Tab Content -->
        <div class="manage-tab-content">
          <!-- Profile Information Tab -->
          <div id="profile-info-tab" class="manage-tab-pane active">
            <div class="form-group">
              <label>Username</label>
              <input type="text" id="edit-username" value="Lebronie" class="form-input">
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="edit-email" value="Lebronjames@gmail.com" class="form-input">
            </div>
            <div class="form-group">
              <label>Phone Number</label>
              <input type="tel" id="edit-phone" value="+63 912 345 6789" class="form-input">
            </div>
          </div>

          <!-- Change Password Tab -->
          <div id="change-password-tab" class="manage-tab-pane">
            <div class="form-group">
              <label>Current Password</label>
              <input type="password" id="current-password" placeholder="Enter current password" class="form-input">
            </div>
            <div class="form-group">
              <label>New Password</label>
              <input type="password" id="new-password" placeholder="Enter new password" class="form-input">
            </div>
            <div class="form-group">
              <label>Confirm New Password</label>
              <input type="password" id="confirm-password" placeholder="Confirm new password" class="form-input">
            </div>
          </div>
        </div>

        <!-- Modal Actions -->
        <div class="manage-modal-actions">
          <button class="btn-cancel">Cancel</button>
          <button class="btn-save-changes">Save Changes</button>
        </div>
      </div>
    </div>

    <script>
      // Tab functionality
      document.addEventListener("DOMContentLoaded", function () {
        const tabs = document.querySelectorAll(".tab");
        const tabContents = document.querySelectorAll(".tab-content");

        tabs.forEach((tab) => {
          tab.addEventListener("click", function () {
            const targetTab = this.getAttribute("data-tab");

            // Remove active class from all tabs and content
            tabs.forEach((t) => t.classList.remove("active"));
            tabContents.forEach((content) =>
              content.classList.remove("active")
            );

            // Add active class to clicked tab and corresponding content
            this.classList.add("active");
            document.getElementById(targetTab).classList.add("active");
          });
        });
      });

      // Logout function
      function logout() {
        // Confirm logout
        if (confirm("Are you sure you want to logout?")) {
          window.location.href = "index.html";
        }
      }

      // Manage Account Modal Functions
      const manageAccountBtn = document.querySelector('.manage-account');
      const manageAccountModal = document.getElementById('manage-account-modal');
      const closeModalBtns = document.querySelectorAll('.close-manage-modal');
      const tabBtns = document.querySelectorAll('.manage-tab-btn');
      const tabPanes = document.querySelectorAll('.manage-tab-pane');
      const cancelBtn = document.querySelector('.btn-cancel');
      const saveBtn = document.querySelector('.btn-save-changes');

      // Open modal
      if (manageAccountBtn) {
        manageAccountBtn.addEventListener('click', () => {
          manageAccountModal.classList.add('show');
          document.body.style.overflow = 'hidden';
        });
      }

      // Close modal
      closeModalBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          manageAccountModal.classList.remove('show');
          document.body.style.overflow = 'auto';
        });
      });

      // Close on background click
      manageAccountModal?.addEventListener('click', (e) => {
        if (e.target === manageAccountModal) {
          manageAccountModal.classList.remove('show');
          document.body.style.overflow = 'auto';
        }
      });

      // Tab switching
      tabBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const targetTab = btn.dataset.tab;
          
          tabBtns.forEach(b => b.classList.remove('active'));
          tabPanes.forEach(p => p.classList.remove('active'));
          
          btn.classList.add('active');
          document.getElementById(targetTab).classList.add('active');
        });
      });

      // Cancel button
      cancelBtn?.addEventListener('click', () => {
        manageAccountModal.classList.remove('show');
        document.body.style.overflow = 'auto';
      });

      // Save Changes button
      saveBtn?.addEventListener('click', () => {
        // Get form values
        const username = document.getElementById('edit-username')?.value;
        const email = document.getElementById('edit-email')?.value;
        const phone = document.getElementById('edit-phone')?.value;
        
        // Here you would send the data to your backend
        alert('Changes saved successfully!');
        
        // Close modal
        manageAccountModal.classList.remove('show');
        document.body.style.overflow = 'auto';
      });
    </script>
  </body>
</html>
